var $s=Object.defineProperty;var ti=(x,e,i)=>e in x?$s(x,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):x[e]=i;var v=(x,e,i)=>(ti(x,typeof e!="symbol"?e+"":e,i),i),ue=(x,e,i)=>{if(!e.has(x))throw TypeError("Cannot "+i)};var t=(x,e,i)=>(ue(x,e,"read from private field"),i?i.call(x):e.get(x)),a=(x,e,i)=>{if(e.has(x))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(x):e.set(x,i)},E=(x,e,i,o)=>(ue(x,e,"write to private field"),o?o.call(x,i):e.set(x,i),i);var n=(x,e,i)=>(ue(x,e,"access private method"),i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))o(g);new MutationObserver(g=>{for(const d of g)if(d.type==="childList")for(const I of d.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&o(I)}).observe(document,{childList:!0,subtree:!0});function i(g){const d={};return g.integrity&&(d.integrity=g.integrity),g.referrerpolicy&&(d.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?d.credentials="include":g.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(g){if(g.ep)return;g.ep=!0;const d=i(g);fetch(g.href,d)}})();class h{constructor(e,i,o,g,d,I){this.code=e,this.mnemonic=i,this.length=o,this.cycles=g,this.mode=d,this.callback=I}execute(){this.callback(this)}}var F;class D{constructor(e=0){a(this,F,void 0);E(this,F,new DataView(new ArrayBuffer(1))),t(this,F).setUint8(0,e)}get(){return t(this,F).getUint8(0)}set(e){t(this,F).setUint8(0,e)}increment(){t(this,F).setUint8(0,t(this,F).getUint8(0)+1)}decrement(){t(this,F).setUint8(0,t(this,F).getUint8(0)-1)}}F=new WeakMap;var X;class xe{constructor(e=0){a(this,X,void 0);E(this,X,new DataView(new ArrayBuffer(2))),t(this,X).setUint16(0,e)}get(){return t(this,X).getUint16(0)}set(e){t(this,X).setUint16(0,e)}increment(){t(this,X).setUint16(0,t(this,X).getUint16(0)+1)}decrement(){t(this,X).setUint16(0,t(this,X).getUint16(0)-1)}}X=new WeakMap;const s={immediate:1,accumulator:2,relative:3,zeroPage:4,zeroPageX:5,zeroPageY:6,absolute:7,absoluteX:8,absoluteY:9,indirect:10,indirectX:11,indirectY:12,none:13},Ae=128,S={CARRY:1,ZERO:2,INTERRUPT:4,DECIMAL:8,BREAK:16,EMPTY:32,OVERFLOW:64,NEGATIVE:128},U={CARRY:254,ZERO:253,INTERRUPT:251,DECIMAL:247,BREAK:239,EMPTY:223,OVERFLOW:191,NEGATIVE:127},ei=x=>~x+1;var l,z,B,P,W,Z,K,r,nt,me,R,m,ht,Se,ot,Ee,at,Pe,ct,De,lt,Fe,gt,Xe,ut,fe,xt,Te,At,Ye,Ct,be,wt,pe,Rt,Le,dt,Oe,mt,Be,St,ye,Et,Ne,Pt,Ie,Dt,Ve,Ft,ve,Xt,ze,ft,ke,Tt,_e,Yt,Me,bt,Ue,pt,We,Lt,Ze,Ot,Ke,Bt,Ge,yt,Je,Nt,He,It,Qe,Vt,qe,vt,je,zt,$e,kt,ts,_t,es,Mt,ss,Ut,is,Wt,rs,Zt,ns,Kt,hs,Gt,os,Jt,as,Ht,cs,Qt,ls,qt,gs,jt,us,$t,xs,te,As,ee,Cs,se,ws,ie,Rs,re,ds,ne,ms,he,Ss,oe,Es,f,T,k,j,_,$,u,C,tt,Ce,A,w;class si{constructor(e){a(this,nt);a(this,R);a(this,ht);a(this,ot);a(this,at);a(this,ct);a(this,lt);a(this,gt);a(this,ut);a(this,xt);a(this,At);a(this,Ct);a(this,wt);a(this,Rt);a(this,dt);a(this,mt);a(this,St);a(this,Et);a(this,Pt);a(this,Dt);a(this,Ft);a(this,Xt);a(this,ft);a(this,Tt);a(this,Yt);a(this,bt);a(this,pt);a(this,Lt);a(this,Ot);a(this,Bt);a(this,yt);a(this,Nt);a(this,It);a(this,Vt);a(this,vt);a(this,zt);a(this,kt);a(this,_t);a(this,Mt);a(this,Ut);a(this,Wt);a(this,Zt);a(this,Kt);a(this,Gt);a(this,Jt);a(this,Ht);a(this,Qt);a(this,qt);a(this,jt);a(this,$t);a(this,te);a(this,ee);a(this,se);a(this,ie);a(this,re);a(this,ne);a(this,he);a(this,oe);a(this,f);a(this,k);a(this,_);a(this,u);a(this,tt);a(this,A);v(this,"PC_RESET",65532);v(this,"STACK_BASE",256);v(this,"STACK_RESET",253);v(this,"STATUS_RESET",S.EMPTY|S.INTERRUPT);a(this,l,void 0);a(this,z,void 0);a(this,B,void 0);a(this,P,void 0);a(this,W,void 0);a(this,Z,void 0);a(this,K,void 0);a(this,r,void 0);E(this,l,e),E(this,z,new xe),E(this,B,new D),E(this,P,new D),E(this,W,new D),E(this,Z,new D),E(this,K,new D),E(this,r,new Map),n(this,nt,me).call(this)}reset(){let e=t(this,l).readWord(this.PC_RESET);e===null&&(e=0),this.setProgramCounter(e),this.setStackPointer(this.STACK_RESET),this.setStatus(this.STATUS_RESET),this.setRegisterA(0),this.setRegisterX(0),this.setRegisterY(0)}getProgramCounter(){return t(this,z).get()}getStackPointer(){return t(this,B).get()}getStatus(){return t(this,P).get()}isCarryFlagClear(){return(t(this,P).get()&S.CARRY)===0}isCarryFlagSet(){return(t(this,P).get()&S.CARRY)===S.CARRY}isZeroFlagClear(){return(t(this,P).get()&S.ZERO)===0}isZeroFlagSet(){return(t(this,P).get()&S.ZERO)===S.ZERO}isOverflowFlagClear(){return(t(this,P).get()&S.OVERFLOW)===0}isOverflowFlagSet(){return(t(this,P).get()&S.OVERFLOW)===S.OVERFLOW}isNegativeFlagClear(){return(t(this,P).get()&S.NEGATIVE)===0}isNegativeFlagSet(){return(t(this,P).get()&S.NEGATIVE)===S.NEGATIVE}getRegisterA(){return t(this,W).get()}getRegisterX(){return t(this,Z).get()}getRegisterY(){return t(this,K).get()}setProgramCounter(e){t(this,z).set(e)}incProgramCounter(){t(this,z).increment()}setStackPointer(e){return t(this,B).set(e)}incStackPointer(){return t(this,B).increment()}decStackPointer(){return t(this,B).decrement()}pushStack(e){t(this,l).write(this.STACK_BASE+this.getStackPointer(),e),this.decStackPointer()}pushWordStack(e){const i=e>>>8,o=e&255;this.pushStack(i),this.pushStack(o)}popStack(){return this.incStackPointer(),t(this,l).read(this.STACK_BASE+this.getStackPointer())}popWordStack(){const e=this.popStack();return this.popStack()<<8|e}setStatus(e){t(this,P).set(e)}setCarryFlag(){this.setStatus(this.getStatus()|S.CARRY)}clearCarryFlag(){this.setStatus(this.getStatus()&U.CARRY)}setZeroFlag(){this.setStatus(this.getStatus()|S.ZERO)}clearZeroFlag(){this.setStatus(this.getStatus()&U.ZERO)}setInterruptFlag(){this.setStatus(this.getStatus()|S.INTERRUPT)}clearInterruptFlag(){this.setStatus(this.getStatus()&U.INTERRUPT)}setDecimalFlag(){this.setStatus(this.getStatus()|S.DECIMAL)}clearDecimalFlag(){this.setStatus(this.getStatus()&U.DECIMAL)}setOverflowFlag(){this.setStatus(this.getStatus()|S.OVERFLOW)}clearOverflowFlag(){this.setStatus(this.getStatus()&U.OVERFLOW)}setNegativeFlag(){this.setStatus(this.getStatus()|S.NEGATIVE)}clearNegativeFlag(){this.setStatus(this.getStatus()&U.NEGATIVE)}setRegisterA(e){return t(this,W).set(e)}setRegisterX(e){return t(this,Z).set(e)}setRegisterY(e){return t(this,K).set(e)}run(){for(;;){const e=t(this,l).read(this.getProgramCounter());this.incProgramCounter();let i=this.getProgramCounter();if(e===0||!t(this,r).has(e))break;const o=t(this,r).get(e);o.execute(),i===this.getProgramCounter()&&this.setProgramCounter(i+o.length-1)}}}l=new WeakMap,z=new WeakMap,B=new WeakMap,P=new WeakMap,W=new WeakMap,Z=new WeakMap,K=new WeakMap,r=new WeakMap,nt=new WeakSet,me=function(){const e=c=>n(this,ht,Se).call(this,c),i=c=>n(this,ot,Ee).call(this,c),o=c=>n(this,at,Pe).call(this,c),g=c=>n(this,ct,De).call(this,c),d=c=>n(this,lt,Fe).call(this,c),I=c=>n(this,gt,Xe).call(this,c),Re=c=>n(this,ut,fe).call(this,c),Ps=c=>n(this,xt,Te).call(this,c),Ds=c=>n(this,At,Ye).call(this,c),Fs=c=>n(this,Ct,be).call(this,c),Xs=()=>n(this,wt,pe).call(this),fs=c=>n(this,Rt,Le).call(this,c),Ts=c=>n(this,dt,Oe).call(this,c),Ys=()=>n(this,mt,Be).call(this),bs=()=>n(this,St,ye).call(this),ps=()=>n(this,Et,Ne).call(this),Ls=()=>n(this,Pt,Ie).call(this),Y=c=>n(this,Dt,Ve).call(this,c),ae=c=>n(this,Ft,ve).call(this,c),ce=c=>n(this,Xt,ze).call(this,c),it=c=>n(this,ft,ke).call(this,c),Os=()=>n(this,Tt,_e).call(this),Bs=()=>n(this,Yt,Me).call(this),b=c=>n(this,bt,Ue).call(this,c),rt=c=>n(this,pt,We).call(this,c),ys=()=>n(this,Lt,Ze).call(this),Ns=()=>n(this,Ot,Ke).call(this),de=c=>n(this,Bt,Ge).call(this,c),Is=()=>n(this,yt,Je).call(this),p=c=>n(this,Nt,He).call(this,c),G=c=>n(this,It,Qe).call(this,c),J=c=>n(this,Vt,qe).call(this,c),H=c=>n(this,vt,je).call(this,c),Vs=()=>n(this,zt,$e).call(this),L=c=>n(this,kt,ts).call(this,c),vs=()=>n(this,_t,es).call(this),zs=()=>n(this,Mt,ss).call(this),ks=()=>n(this,Ut,is).call(this),_s=()=>n(this,Wt,rs).call(this),Q=c=>n(this,Zt,ns).call(this,c),q=c=>n(this,Kt,hs).call(this,c),Ms=()=>n(this,Gt,os).call(this),Us=()=>n(this,Jt,as).call(this),O=c=>n(this,Ht,cs).call(this,c),Ws=()=>n(this,Qt,ls).call(this),Zs=()=>n(this,qt,gs).call(this),Ks=()=>n(this,jt,us).call(this),le=c=>n(this,te,As).call(this,c),ge=c=>n(this,ee,Cs).call(this,c),V=c=>n(this,$t,xs).call(this,c),Gs=()=>n(this,se,ws).call(this),Js=()=>n(this,ie,Rs).call(this),Hs=()=>n(this,re,ds).call(this),Qs=()=>n(this,ne,ms).call(this),qs=()=>n(this,he,Ss).call(this),js=()=>n(this,oe,Es).call(this);t(this,r).set(105,new h(105,"ADC",2,2,s.immediate,e)),t(this,r).set(101,new h(101,"ADC",2,3,s.zeroPage,e)),t(this,r).set(117,new h(117,"ADC",2,4,s.zeroPageX,e)),t(this,r).set(109,new h(109,"ADC",3,4,s.absolute,e)),t(this,r).set(125,new h(125,"ADC",3,4,s.absoluteX,e)),t(this,r).set(121,new h(121,"ADC",3,4,s.absoluteY,e)),t(this,r).set(97,new h(97,"ADC",2,6,s.indirectX,e)),t(this,r).set(113,new h(113,"ADC",2,5,s.indirectX,e)),t(this,r).set(41,new h(41,"AND",2,2,s.immediate,i)),t(this,r).set(37,new h(37,"AND",2,3,s.zeroPage,i)),t(this,r).set(53,new h(53,"AND",2,4,s.zeroPageX,i)),t(this,r).set(45,new h(45,"AND",3,4,s.absolute,i)),t(this,r).set(61,new h(61,"AND",3,4,s.absoluteX,i)),t(this,r).set(57,new h(57,"AND",3,4,s.absoluteY,i)),t(this,r).set(33,new h(33,"AND",2,6,s.indirectX,i)),t(this,r).set(49,new h(49,"AND",2,5,s.indirectY,i)),t(this,r).set(10,new h(10,"ASL",1,2,s.accumulator,o)),t(this,r).set(6,new h(6,"ASL",2,5,s.zeroPage,o)),t(this,r).set(22,new h(22,"ASL",2,6,s.zeroPageX,o)),t(this,r).set(14,new h(14,"ASL",3,6,s.absolute,o)),t(this,r).set(30,new h(30,"ASL",3,7,s.absoluteX,o)),t(this,r).set(144,new h(144,"BCC",2,2,s.relative,g)),t(this,r).set(176,new h(176,"BCS",2,2,s.relative,d)),t(this,r).set(240,new h(240,"BEQ",2,2,s.relative,I)),t(this,r).set(36,new h(36,"BIT",2,3,s.zeroPage,Re)),t(this,r).set(44,new h(44,"BIT",3,4,s.absolute,Re)),t(this,r).set(48,new h(48,"BMI",2,2,s.relative,Ps)),t(this,r).set(208,new h(208,"BNE",2,2,s.relative,Ds)),t(this,r).set(16,new h(16,"BPL",2,2,s.relative,Fs)),t(this,r).set(0,new h(0,"BRK",1,7,s.none,Xs)),t(this,r).set(80,new h(80,"BVC",2,2,s.relative,fs)),t(this,r).set(112,new h(112,"BVS",2,2,s.relative,Ts)),t(this,r).set(24,new h(24,"CLC",1,2,s.none,Ys)),t(this,r).set(216,new h(216,"CLD",1,2,s.none,bs)),t(this,r).set(88,new h(88,"CLI",1,2,s.none,ps)),t(this,r).set(184,new h(184,"CLV",1,2,s.none,Ls)),t(this,r).set(201,new h(201,"CMP",2,2,s.immediate,Y)),t(this,r).set(197,new h(197,"CMP",2,3,s.zeroPage,Y)),t(this,r).set(213,new h(213,"CMP",2,4,s.zeroPageX,Y)),t(this,r).set(205,new h(205,"CMP",3,4,s.absolute,Y)),t(this,r).set(221,new h(221,"CMP",3,4,s.absoluteX,Y)),t(this,r).set(217,new h(217,"CMP",3,4,s.absoluteY,Y)),t(this,r).set(193,new h(193,"CMP",2,6,s.indirectX,Y)),t(this,r).set(209,new h(209,"CMP",2,5,s.indirectY,Y)),t(this,r).set(224,new h(224,"CPX",2,2,s.immediate,ae)),t(this,r).set(228,new h(228,"CPX",2,3,s.zeroPage,ae)),t(this,r).set(236,new h(236,"CPX",3,4,s.absolute,ae)),t(this,r).set(192,new h(192,"CPY",2,2,s.immediate,ce)),t(this,r).set(196,new h(196,"CPY",2,3,s.zeroPage,ce)),t(this,r).set(204,new h(204,"CPY",3,4,s.absolute,ce)),t(this,r).set(198,new h(198,"DEC",2,5,s.zeroPage,it)),t(this,r).set(214,new h(214,"DEC",2,6,s.zeroPageX,it)),t(this,r).set(206,new h(206,"DEC",3,6,s.absolute,it)),t(this,r).set(222,new h(222,"DEC",3,7,s.absoluteX,it)),t(this,r).set(202,new h(202,"DEX",1,2,s.none,Os)),t(this,r).set(136,new h(136,"DEY",1,2,s.none,Bs)),t(this,r).set(73,new h(73,"EOR",2,2,s.immediate,b)),t(this,r).set(69,new h(69,"EOR",2,3,s.zeroPage,b)),t(this,r).set(85,new h(85,"EOR",2,4,s.zeroPageX,b)),t(this,r).set(77,new h(77,"EOR",3,4,s.absolute,b)),t(this,r).set(93,new h(93,"EOR",3,4,s.absoluteX,b)),t(this,r).set(89,new h(89,"EOR",3,4,s.absoluteY,b)),t(this,r).set(65,new h(65,"EOR",2,6,s.indirectX,b)),t(this,r).set(81,new h(81,"EOR",2,5,s.indirectY,b)),t(this,r).set(230,new h(230,"INC",2,5,s.zeroPage,rt)),t(this,r).set(246,new h(246,"INC",2,6,s.zeroPageX,rt)),t(this,r).set(238,new h(238,"INC",3,6,s.absolute,rt)),t(this,r).set(254,new h(254,"INC",3,7,s.absoluteX,rt)),t(this,r).set(232,new h(232,"INX",1,2,s.none,ys)),t(this,r).set(200,new h(200,"INY",1,2,s.none,Ns)),t(this,r).set(76,new h(76,"JMP",3,3,s.absolute,de)),t(this,r).set(108,new h(108,"JMP",3,5,s.indirect,de)),t(this,r).set(32,new h(32,"JSR",3,6,s.absolute,Is)),t(this,r).set(169,new h(169,"LDA",2,2,s.immediate,p)),t(this,r).set(165,new h(165,"LDA",2,3,s.zeroPage,p)),t(this,r).set(181,new h(181,"LDA",2,4,s.zeroPageX,p)),t(this,r).set(173,new h(173,"LDA",3,4,s.absolute,p)),t(this,r).set(189,new h(189,"LDA",3,4,s.absoluteX,p)),t(this,r).set(185,new h(185,"LDA",3,4,s.absoluteY,p)),t(this,r).set(161,new h(161,"LDA",2,6,s.indirectX,p)),t(this,r).set(177,new h(177,"LDA",2,5,s.indirectY,p)),t(this,r).set(162,new h(162,"LDX",2,2,s.immediate,G)),t(this,r).set(166,new h(166,"LDX",2,3,s.zeroPage,G)),t(this,r).set(182,new h(182,"LDX",2,4,s.zeroPageY,G)),t(this,r).set(174,new h(174,"LDX",3,4,s.absolute,G)),t(this,r).set(190,new h(190,"LDX",3,4,s.absoluteY,G)),t(this,r).set(160,new h(160,"LDY",2,2,s.immediate,J)),t(this,r).set(164,new h(164,"LDY",2,3,s.zeroPage,J)),t(this,r).set(180,new h(180,"LDY",2,4,s.zeroPageY,J)),t(this,r).set(172,new h(172,"LDY",3,4,s.absolute,J)),t(this,r).set(188,new h(188,"LDY",3,4,s.absoluteY,J)),t(this,r).set(74,new h(74,"LSR",1,2,s.accumulator,H)),t(this,r).set(70,new h(70,"LSR",2,5,s.zeroPage,H)),t(this,r).set(86,new h(86,"LSR",2,6,s.zeroPageX,H)),t(this,r).set(78,new h(78,"LSR",3,6,s.absolute,H)),t(this,r).set(94,new h(94,"LSR",3,7,s.absoluteX,H)),t(this,r).set(234,new h(234,"NOP",1,2,s.none,Vs)),t(this,r).set(9,new h(9,"ORA",2,2,s.immediate,L)),t(this,r).set(5,new h(5,"ORA",2,3,s.zeroPage,L)),t(this,r).set(21,new h(21,"ORA",2,4,s.zeroPageX,L)),t(this,r).set(13,new h(13,"ORA",3,4,s.absolute,L)),t(this,r).set(29,new h(29,"ORA",3,4,s.absoluteX,L)),t(this,r).set(25,new h(25,"ORA",3,4,s.absoluteY,L)),t(this,r).set(1,new h(1,"ORA",2,6,s.indirectX,L)),t(this,r).set(17,new h(17,"ORA",2,5,s.indirectY,L)),t(this,r).set(72,new h(72,"PHA",1,3,s.none,vs)),t(this,r).set(8,new h(8,"PHP",1,3,s.none,zs)),t(this,r).set(104,new h(104,"PLA",1,4,s.none,ks)),t(this,r).set(40,new h(40,"PLP",1,4,s.none,_s)),t(this,r).set(42,new h(42,"ROL",1,2,s.accumulator,Q)),t(this,r).set(38,new h(38,"ROL",2,5,s.zeroPage,Q)),t(this,r).set(54,new h(54,"ROL",2,6,s.zeroPageX,Q)),t(this,r).set(46,new h(46,"ROL",3,6,s.absolute,Q)),t(this,r).set(62,new h(62,"ROL",3,7,s.absoluteX,Q)),t(this,r).set(106,new h(106,"ROR",1,2,s.accumulator,q)),t(this,r).set(102,new h(102,"ROR",2,5,s.zeroPage,q)),t(this,r).set(118,new h(118,"ROR",2,6,s.zeroPageX,q)),t(this,r).set(110,new h(110,"ROR",3,6,s.absolute,q)),t(this,r).set(126,new h(126,"ROR",3,7,s.absoluteX,q)),t(this,r).set(64,new h(64,"RTI",1,6,s.none,Ms)),t(this,r).set(96,new h(96,"RTS",1,6,s.none,Us)),t(this,r).set(233,new h(233,"SBC",2,2,s.immediate,O)),t(this,r).set(229,new h(229,"SBC",2,3,s.zeroPage,O)),t(this,r).set(245,new h(245,"SBC",2,4,s.zeroPageX,O)),t(this,r).set(237,new h(237,"SBC",3,4,s.absolute,O)),t(this,r).set(253,new h(253,"SBC",3,4,s.absoluteX,O)),t(this,r).set(249,new h(249,"SBC",3,4,s.absoluteY,O)),t(this,r).set(225,new h(225,"SBC",2,6,s.indirectX,O)),t(this,r).set(241,new h(241,"SBC",2,5,s.indirectY,O)),t(this,r).set(56,new h(56,"SEC",1,2,s.none,Ws)),t(this,r).set(248,new h(248,"SED",1,2,s.none,Zs)),t(this,r).set(120,new h(120,"SEI",1,2,s.none,Ks)),t(this,r).set(133,new h(133,"STA",2,3,s.zeroPage,V)),t(this,r).set(149,new h(149,"STA",2,4,s.zeroPageX,V)),t(this,r).set(141,new h(141,"STA",3,4,s.absolute,V)),t(this,r).set(157,new h(157,"STA",3,5,s.absoluteX,V)),t(this,r).set(153,new h(153,"STA",3,5,s.absoluteY,V)),t(this,r).set(129,new h(133,"STA",2,6,s.indirectX,V)),t(this,r).set(145,new h(133,"STA",2,6,s.indirectY,V)),t(this,r).set(134,new h(134,"STX",2,3,s.zeroPage,le)),t(this,r).set(150,new h(150,"STX",2,4,s.zeroPageY,le)),t(this,r).set(142,new h(142,"STX",3,4,s.absolute,le)),t(this,r).set(132,new h(132,"STY",2,3,s.zeroPage,ge)),t(this,r).set(148,new h(148,"STY",2,4,s.zeroPageX,ge)),t(this,r).set(140,new h(140,"STY",3,4,s.absolute,ge)),t(this,r).set(170,new h(170,"TAX",1,2,s.none,Gs)),t(this,r).set(168,new h(168,"TAY",1,2,s.none,Js)),t(this,r).set(186,new h(186,"TSX",1,2,s.none,Hs)),t(this,r).set(138,new h(138,"TXA",1,2,s.none,Qs)),t(this,r).set(154,new h(154,"TXS",1,2,s.none,qs)),t(this,r).set(152,new h(152,"TYA",1,2,s.none,js))},R=new WeakSet,m=function(e){if(e===s.immediate)return this.getProgramCounter();if(e===s.relative){const i=t(this,l).read(this.getProgramCounter());return this.getProgramCounter()+1+i}if(e===s.zeroPage)return t(this,l).read(this.getProgramCounter());if(e===s.zeroPageX){const i=t(this,l).read(this.getProgramCounter());return new D(i+this.getRegisterX()).get()}if(e===s.zeroPageY){const i=t(this,l).read(this.getProgramCounter());return new D(i+this.getRegisterY()).get()}if(e===s.absolute)return t(this,l).readWord(this.getProgramCounter());if(e===s.absoluteX){const i=t(this,l).readWord(this.getProgramCounter());return new xe(i+this.getRegisterX()).get()}if(e===s.absoluteY){const i=t(this,l).readWord(this.getProgramCounter());return new xe(i+this.getRegisterY()).get()}if(e===s.indirect){const i=t(this,l).readWord(this.getProgramCounter());let o;if((i&255)===255){const g=t(this,l).read(i);o=t(this,l).read(i&65280)<<8|g}else o=t(this,l).readWord(i);return o}if(e===s.indirectX){const i=t(this,l).read(this.getProgramCounter()),o=new D(i+this.getRegisterX());return t(this,l).readWord(o.get())}if(e===s.indirectY){const i=t(this,l).read(this.getProgramCounter()),o=new D(i+this.getRegisterY());return t(this,l).readWord(o.get())}return null},ht=new WeakSet,Se=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);let g=this.getRegisterA()+o;this.isCarryFlagSet()&&(g+=1),g>255&&this.setCarryFlag();const d=new D(g);n(this,tt,Ce).call(this,this.getRegisterA(),o,d.get()),this.setRegisterA(d.get()),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},ot=new WeakSet,Ee=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);this.setRegisterA(this.getRegisterA()&o),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},at=new WeakSet,Pe=function(e){let i;if(e.mode===s.accumulator)i=this.getRegisterA(),n(this,k,j).call(this,i),this.setRegisterA(i<<1),i=this.getRegisterA();else{const o=n(this,R,m).call(this,e.mode);i=t(this,l).read(o),n(this,k,j).call(this,i),t(this,l).write(o,i<<1),i=t(this,l).read(o)}n(this,u,C).call(this,i),n(this,A,w).call(this,i)},ct=new WeakSet,De=function(e){this.isCarryFlagClear()&&n(this,f,T).call(this,e)},lt=new WeakSet,Fe=function(e){this.isCarryFlagSet()&&n(this,f,T).call(this,e)},gt=new WeakSet,Xe=function(e){this.isZeroFlagSet()&&n(this,f,T).call(this,e)},ut=new WeakSet,fe=function(e){const i=n(this,R,m).call(this,e.mode);let o=t(this,l).read(i);o&S.OVERFLOW?this.setOverflowFlag():this.clearOverflowFlag(),o&S.NEGATIVE?this.setNegativeFlag():this.clearNegativeFlag(),n(this,u,C).call(this,this.getRegisterA()&o)},xt=new WeakSet,Te=function(e){this.isNegativeFlagSet()&&n(this,f,T).call(this,e)},At=new WeakSet,Ye=function(e){this.isZeroFlagClear()&&n(this,f,T).call(this,e)},Ct=new WeakSet,be=function(e){this.isNegativeFlagClear()&&n(this,f,T).call(this,e)},wt=new WeakSet,pe=function(){},Rt=new WeakSet,Le=function(e){this.isOverflowFlagClear()&&n(this,f,T).call(this,e)},dt=new WeakSet,Oe=function(e){this.isOverflowFlagSet()&&n(this,f,T).call(this,e)},mt=new WeakSet,Be=function(){this.clearCarryFlag()},St=new WeakSet,ye=function(){this.clearDecimalFlag()},Et=new WeakSet,Ne=function(){this.clearInterruptFlag()},Pt=new WeakSet,Ie=function(){this.clearOverflowFlag()},Dt=new WeakSet,Ve=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i),g=this.getRegisterA()-o;g>=0&&this.setCarryFlag(),n(this,u,C).call(this,g),n(this,A,w).call(this,g)},Ft=new WeakSet,ve=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i),g=this.getRegisterX()-o;g>=0&&this.setCarryFlag(),n(this,u,C).call(this,g),n(this,A,w).call(this,g)},Xt=new WeakSet,ze=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i),g=this.getRegisterY()-o;g>=0&&this.setCarryFlag(),n(this,u,C).call(this,g),n(this,A,w).call(this,g)},ft=new WeakSet,ke=function(e){const i=n(this,R,m).call(this,e.mode);let o=t(this,l).read(i);o-=1,t(this,l).write(i,o),n(this,u,C).call(this,o),n(this,A,w).call(this,o)},Tt=new WeakSet,_e=function(){this.setRegisterX(this.getRegisterX()-1),n(this,u,C).call(this,this.getRegisterX()),n(this,A,w).call(this,this.getRegisterX())},Yt=new WeakSet,Me=function(){this.setRegisterY(this.getRegisterY()-1),n(this,u,C).call(this,this.getRegisterY()),n(this,A,w).call(this,this.getRegisterY())},bt=new WeakSet,Ue=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i),g=this.getRegisterA()^o;this.setRegisterA(g),n(this,u,C).call(this,g),n(this,A,w).call(this,g)},pt=new WeakSet,We=function(e){const i=n(this,R,m).call(this,e.mode);let o=t(this,l).read(i);o+=1,t(this,l).write(i,o),n(this,u,C).call(this,o),n(this,A,w).call(this,o)},Lt=new WeakSet,Ze=function(){this.setRegisterX(this.getRegisterX()+1),n(this,u,C).call(this,this.getRegisterX()),n(this,A,w).call(this,this.getRegisterX())},Ot=new WeakSet,Ke=function(){this.setRegisterY(this.getRegisterY()+1),n(this,u,C).call(this,this.getRegisterY()),n(this,A,w).call(this,this.getRegisterY())},Bt=new WeakSet,Ge=function(e){const i=n(this,R,m).call(this,e.mode);this.setProgramCounter(i)},yt=new WeakSet,Je=function(){this.pushWordStack(this.getProgramCounter()+2-1);const e=t(this,l).readWord(this.getProgramCounter());this.setProgramCounter(e)},Nt=new WeakSet,He=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);this.setRegisterA(o),n(this,u,C).call(this,o),n(this,A,w).call(this,o)},It=new WeakSet,Qe=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);this.setRegisterX(o),n(this,u,C).call(this,o),n(this,A,w).call(this,o)},Vt=new WeakSet,qe=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);this.setRegisterY(o),n(this,u,C).call(this,o),n(this,A,w).call(this,o)},vt=new WeakSet,je=function(e){let i;if(e.mode===s.accumulator)i=this.getRegisterA(),n(this,_,$).call(this,i),this.setRegisterA(i>>>1),i=this.getRegisterA();else{const o=n(this,R,m).call(this,e.mode);i=t(this,l).read(o),n(this,_,$).call(this,i),t(this,l).write(o,i>>>1),i=t(this,l).read(o)}n(this,u,C).call(this,i),n(this,A,w).call(this,i)},zt=new WeakSet,$e=function(){},kt=new WeakSet,ts=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);this.setRegisterA(this.getRegisterA()|o),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},_t=new WeakSet,es=function(){this.pushStack(this.getRegisterA())},Mt=new WeakSet,ss=function(){this.pushStack(this.getStatus())},Ut=new WeakSet,is=function(){this.setRegisterA(this.popStack()),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},Wt=new WeakSet,rs=function(){this.setStatus(this.popStack())},Zt=new WeakSet,ns=function(e){let i;if(e.mode===s.accumulator){i=this.getRegisterA();const o=this.isCarryFlagSet();n(this,k,j).call(this,i),i<<=1,o&&(i|=1),this.setRegisterA(i),i=this.getRegisterA()}else{const o=n(this,R,m).call(this,e.mode);i=t(this,l).read(o);const g=this.isCarryFlagSet();n(this,k,j).call(this,i),i<<=1,g&&(i|=1),t(this,l).write(o,i),i=t(this,l).read(o)}n(this,u,C).call(this,i),n(this,A,w).call(this,i)},Kt=new WeakSet,hs=function(e){let i;if(e.mode===s.accumulator){i=this.getRegisterA();const o=this.isCarryFlagSet();n(this,_,$).call(this,i),i>>>=1,o&&(i|=128),this.setRegisterA(i),i=this.getRegisterA()}else{const o=n(this,R,m).call(this,e.mode);i=t(this,l).read(o);const g=this.isCarryFlagSet();n(this,_,$).call(this,i),i>>>=1,g&&(i|=128),t(this,l).write(o,i),i=t(this,l).read(o)}n(this,u,C).call(this,i),n(this,A,w).call(this,i)},Gt=new WeakSet,os=function(){this.setStatus(this.popStack()),this.setProgramCounter(this.popWordStack())},Jt=new WeakSet,as=function(){this.setProgramCounter(this.popWordStack()+1)},Ht=new WeakSet,cs=function(e){const i=n(this,R,m).call(this,e.mode),o=t(this,l).read(i);let g=this.getRegisterA()+ei(o);this.isCarryFlagSet()&&(g+=1),g>255&&this.setCarryFlag();const d=new D(g);n(this,tt,Ce).call(this,this.getRegisterA(),o,d.get()),this.setRegisterA(d.get()),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},Qt=new WeakSet,ls=function(){this.setCarryFlag()},qt=new WeakSet,gs=function(){this.setDecimalFlag()},jt=new WeakSet,us=function(){this.setInterruptFlag()},$t=new WeakSet,xs=function(e){const i=n(this,R,m).call(this,e.mode);t(this,l).write(i,this.getRegisterA())},te=new WeakSet,As=function(e){const i=n(this,R,m).call(this,e.mode);t(this,l).write(i,this.getRegisterX())},ee=new WeakSet,Cs=function(e){const i=n(this,R,m).call(this,e.mode);t(this,l).write(i,this.getRegisterY())},se=new WeakSet,ws=function(){this.setRegisterX(this.getRegisterA()),n(this,u,C).call(this,this.getRegisterX()),n(this,A,w).call(this,this.getRegisterX())},ie=new WeakSet,Rs=function(){this.setRegisterY(this.getRegisterA()),n(this,u,C).call(this,this.getRegisterY()),n(this,A,w).call(this,this.getRegisterY())},re=new WeakSet,ds=function(){this.setRegisterX(this.popStack()),n(this,u,C).call(this,this.setRegisterX()),n(this,A,w).call(this,this.setRegisterX())},ne=new WeakSet,ms=function(){this.setRegisterA(this.getRegisterX()),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},he=new WeakSet,Ss=function(){this.pushStack(this.getRegisterX())},oe=new WeakSet,Es=function(){this.setRegisterA(this.getRegisterY()),n(this,u,C).call(this,this.getRegisterA()),n(this,A,w).call(this,this.getRegisterA())},f=new WeakSet,T=function(e){const i=n(this,R,m).call(this,e.mode);this.setProgramCounter(i)},k=new WeakSet,j=function(e){(e&128)==128?this.setCarryFlag():this.clearCarryFlag()},_=new WeakSet,$=function(e){(e&1)==1?this.setCarryFlag():this.clearCarryFlag()},u=new WeakSet,C=function(e){e===0?this.setZeroFlag():this.clearZeroFlag()},tt=new WeakSet,Ce=function(e,i,o){(o^e)&(o^i)&Ae?this.setOverflowFlag():this.clearOverflowFlag()},A=new WeakSet,w=function(e){(e&Ae)===Ae?this.setNegativeFlag():this.clearNegativeFlag()};var M,et,we;class ii{constructor(e){a(this,et);a(this,M,void 0);if(!Number.isInteger(e)||e<=0)throw"[Memory::class] Bad constructor parameters";E(this,M,new DataView(new ArrayBuffer(e)))}read(e){return n(this,et,we).call(this,e)?t(this,M).getUint8(e):null}readWord(e){let i=this.read(e),o=this.read(e+1);return i===null||o===null?null:o<<8|i}write(e,i){return n(this,et,we).call(this,e)?(t(this,M).setUint8(e,i),!0):!1}writeWord(e,i){let o=i>>8,g=i&255;return this.write(e,g)&&this.write(e+1,o)}copy(e,i){const o=e.values();let g=i;for(const d of o){if(!this.write(g,d))break;g+=1}}}M=new WeakMap,et=new WeakSet,we=function(e){return Number.isInteger(e)&&e>=0&&e<t(this,M).byteLength};var y,N,st;class ri{constructor(e){v(this,"MEMORY_SIZE",65536);v(this,"PC_START",32768);a(this,y,void 0);a(this,N,void 0);a(this,st,void 0);E(this,N,new ii(this.MEMORY_SIZE)),E(this,y,new si(t(this,N))),E(this,st,e),t(this,N).copy(t(this,st),this.PC_START),t(this,N).writeWord(t(this,y).PC_RESET,this.PC_START),t(this,y).reset()}start(){t(this,y).run()}getCPU(){return t(this,y)}getMemory(){return t(this,N)}}y=new WeakMap,N=new WeakMap,st=new WeakMap;let ni=new Uint8Array([232,0]);const hi=new ri(ni);hi.start();
